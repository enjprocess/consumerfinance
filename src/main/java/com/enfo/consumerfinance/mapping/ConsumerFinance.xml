<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.enfo.consumerfinance.dao.IConsumerFinanceDao">
	
	<!-- 同步信托计划 -->
	<select id="getProductConsumer" statementType="CALLABLE"
		parameterType="java.lang.String" resultType="com.enfo.consumerfinance.model.ProductConsumerModel">
		 {call SP_QUERY_TPRODUCT_CONSUMER(#{product_code})}
	</select>

    <!-- 发起放款审批流程 -->
	<select id="addInvestchangeConsumer" statementType="CALLABLE"  
		parameterType="com.enfo.consumerfinance.model.InvestchangeConsumerModel"  >
		 {call SP_ADD_TINVESTCHANGE_CONSUMER(#{product_id}, #{pay_date}, #{trade_money}, #{org_code}, #{org_name}, #{loan_cont_no}, #{input_man}, #{pay_file})}
	</select>

    <!-- 放款确认 -->
        <!-- 查询接口数据 -->
	<select id="getInvestchangeCheck" statementType="CALLABLE"  
		parameterType="java.lang.Integer"  resultType="com.enfo.consumerfinance.model.DepositConfirmModel">
		 {call SP_QUERY_TINVESTCHANGE_CHECK(#{problem_id})}
	</select>
        <!-- 调用接口后修改状态 -->
    <select id="checkInvestchangeConsumer" statementType="CALLABLE" resultType="map">
         {call SP_CHECK_TINVESTCHANGE_CONSUMER(#{0}, #{1})}
    </select>
    
    <!-- 还款流程 -->
        <select id="addInvestchangeBackConsumer" statementType="CALLABLE" parameterType="com.enfo.consumerfinance.model.InvestchangeBackConsumerModel" >
         {call SP_ADD_TINVESTCHANGE_BACK_CONSUMER(#{product_id}, #{date}, #{principal_amount}, #{interest_amount}, #{org_code}, #{org_name}, #{recv_file}, #{input_man})}
    </select>

     <!-- 消费金融类会计并账 -->
    <select id="addTunpostwantConsumer" statementType="CALLABLE"  
        parameterType="com.enfo.consumerfinance.model.TunpostwantConsumer"  >
         {call SP_ADD_TUNPOSTWANT_CONSUMER(#{busi_type}, #{product_id}, #{trade_date}, #{principal_amount}, #{interest_amount}, #{yhs_amount}, #{bank_acct}, #{input_man})}
    </select>

</mapper>